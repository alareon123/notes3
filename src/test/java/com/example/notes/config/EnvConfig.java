package com.example.notes.config;

import org.aeonbits.owner.Config;

/**
 * Интерфейс конфигурации для тестового окружения.
 *
 * ЗАЧЕМ НУЖЕН ЭТОТ КЛАСС:
 * Этот интерфейс определяет, какие настройки нужны для запуска тестов.
 * Вместо того, чтобы хардкодить (жёстко прописывать) URL сервера и другие настройки
 * прямо в тестах, мы храним их в отдельном файле конфигурации.
 *
 * КАК ЭТО РАБОТАЕТ:
 * 1. Мы создаём интерфейс (не класс!) с методами для каждой настройки
 * 2. Библиотека Owner автоматически создаёт реализацию этого интерфейса
 * 3. Owner читает значения из файла local.properties или использует значения по умолчанию
 * 4. Когда мы вызываем метод baseUrl(), Owner возвращает значение из файла
 *
 * ПОЧЕМУ ИНТЕРФЕЙС, А НЕ КЛАСС:
 * Библиотека Owner использует магию Java (динамические прокси), чтобы автоматически
 * создать класс, который реализует этот интерфейс. Нам не нужно писать код чтения файлов,
 * парсинга строк и т.д. - Owner делает всё за нас.
 */
// Аннотация @Config.Sources указывает, откуда брать настройки
// "classpath:config/local.properties" означает:
// - classpath: искать файл в папке resources внутри проекта
// - config/local.properties: путь к файлу относительно resources
// Полный путь: src/test/resources/config/local.properties
@Config.Sources("classpath:config/local.properties")
public interface EnvConfig extends Config {

    /**
     * Возвращает базовый URL API для тестирования.
     *
     * КАК РАБОТАЕТ ЭТОТ МЕТОД:
     * 1. Owner ищет в файле local.properties строку вида: baseUrl=http://example.com
     * 2. Если находит - возвращает значение справа от знака =
     * 3. Если не находит - возвращает значение из @DefaultValue
     *
     * ЗАЧЕМ НУЖЕН @Key:
     * Эта аннотация связывает метод с конкретным ключом в properties-файле.
     * Без неё Owner будет искать ключ с именем метода (baseUrl).
     * С @Key("baseUrl") мы явно указываем, какой ключ искать.
     *
     * ЗАЧЕМ НУЖЕН @DefaultValue:
     * Если файл local.properties не найден или в нём нет ключа baseUrl,
     * будет использовано это значение по умолчанию.
     * Это удобно: тесты запустятся даже без файла конфигурации.
     *
     * @return URL сервера API (например, "https://practice.expandtesting.com/notes/api")
     */
    @Key("baseUrl")
    @DefaultValue("https://practice.expandtesting.com/notes/api")
    String baseUrl();

    /**
     * Возвращает уровень логирования HTTP-запросов.
     *
     * КАК ИСПОЛЬЗУЕТСЯ ЭТО ЗНАЧЕНИЕ:
     * RestAssured может логировать (выводить в консоль):
     * - NONE: ничего не выводить
     * - BASIC: только метод, URL и статус ответа
     * - HEADERS: метод, URL, заголовки и статус
     * - BODY: всё вышеперечисленное плюс тело запроса/ответа
     * - ALL: максимально подробная информация
     *
     * ЗАЧЕМ НАСТРАИВАТЬ УРОВЕНЬ ЛОГИРОВАНИЯ:
     * - При разработке тестов удобно видеть все детали (BODY или ALL)
     * - При запуске в CI/CD достаточно BASIC, чтобы не захламлять логи
     * - Можно менять уровень в файле конфигурации без изменения кода
     *
     * @return уровень логирования (NONE, BASIC, HEADERS, BODY, ALL)
     */
    @Key("log.level")
    @DefaultValue("BASIC")
    String logLevel();
}
